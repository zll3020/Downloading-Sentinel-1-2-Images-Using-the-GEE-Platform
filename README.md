# 哨兵一号和哨兵二号遥感数据处理脚本

## 概述

此脚本用于处理哨兵一号（Sentinel-1）和哨兵二号（Sentinel-2）卫星影像，针对特定的研究区域（本例为**沉湖国际重要湿地**）。脚本按照每月处理数据，应用云掩膜处理（仅适用于哨兵二号），并将处理后的影像导出到 Google Drive 中。

此脚本在 Google Earth Engine (GEE) 平台上实现，适用于植被健康监测（如 NDVI 计算）和雷达影像分析。

## 功能特点

### 哨兵二号处理
- **云掩膜**：使用 `MSK_CLDPRB`（云概率）和 `SCL`（场景分类）波段去除云和云阴影。
- **NDVI 计算**：计算归一化植被指数（NDVI），并将其作为新波段添加。
- **波段重命名与选择**：选择和重命名关键光谱波段以及 NDVI 波段，便于后续分析。
- **按月处理**：按给定年份的每月处理哨兵二号影像。
- **数据导出**：将处理后的影像导出到 Google Drive。

### 哨兵一号处理
- **极化筛选**：筛选 VV 和 VH 极化数据。
- **干涉宽幅模式（IW）**：筛选 IW 模式下的影像数据。
- **按月处理**：按给定年份的每月处理哨兵一号影像。
- **数据导出**：将处理后的雷达影像导出到 Google Drive。

## 使用要求

- Google Earth Engine 账户。
- 能访问 Google Earth Engine 中的哨兵一号和哨兵二号数据集。
- 定义研究区域几何（`geometry` 变量）。

## 使用方法

1. **定义几何区域**：在 Google Earth Engine 中定义你的研究区域几何，并将其赋值给 `geometry` 变量。本脚本默认以沉湖湿地为例。

2. **自定义参数**：
   - 设置需要处理的年份（默认为 `2024`）。
   - 如果必要，可以调整云概率阈值（默认为 20%）。

3. **运行脚本**：
   - 将脚本复制并粘贴到 Google Earth Engine 的代码编辑器中。
   - 运行脚本以处理哨兵一号和哨兵二号影像。

4. **导出数据**：
   - 处理后的影像将导出到 Google Drive 中。每个影像将以对应的月份和年份命名，便于识别。

## 脚本说明

### 哨兵二号云掩膜
函数 `maskS2clouds` 使用 `MSK_CLDPRB` 波段筛选出云概率低于 20% 的像素，同时结合 `SCL` 波段去除云阴影、云、薄云和卷云。

### NDVI 计算
NDVI 计算公式为：
```
NDVI = (B8 - B4) / (B8 + B4)
```
在脚本中使用 GEE 提供的 `normalizedDifference` 方法实现。

### 哨兵一号筛选
脚本通过以下条件筛选哨兵一号的雷达数据：
- 极化模式：VV 和 VH。
- 仪器模式：干涉宽幅模式（IW）。

### 数据导出
哨兵一号和哨兵二号的处理影像均以 10 米分辨率导出至 Google Drive。

## 命名规则

导出的文件命名规则如下：
```
S2_<year>_<month>_<timestamp>  // 哨兵二号处理影像
S1_<year>_<month>_<timestamp>  // 哨兵一号处理影像
```

## 示例输出

**哨兵二号 NDVI 影像**：
- 包含波段：B1, B2, B3, B4（光谱波段）和 B5（NDVI 波段）。

**哨兵一号雷达影像**：
- 包含波段：VV 和 VH 极化波段。

## 注意事项

1. **性能问题**：
   - 如果研究区域较大或时间范围过长，处理可能需要较长时间。如遇性能问题，可缩小区域或减少处理月份。

2. **像素限制**：
   - 参数 `maxPixels` 设置为 `1e13`，以处理大规模数据。如果仍遇错误，可适当调整研究区域或降低分辨率（增大 `scale` 值）。

3. **数据验证**：
   - 脚本会检查每月是否存在影像数据。如果数据集为空，将跳过该月份的处理和导出，避免错误。

## 许可协议

此项目基于 MIT 许可协议发布。详见 [LICENSE](LICENSE) 文件。

## 鸣谢

- 哨兵一号和二号数据由欧洲航天局（ESA）提供。
- 感谢 Google Earth Engine 提供强大的遥感分析和地理空间处理平台。
